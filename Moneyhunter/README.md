Table of Contents
=================

   * [買進持有](#買進持有)
      * [穩定成長](#穩定成長)
         * [進場條件:](#進場條件)
         * [出場訊號:](#出場訊號)
      * [指數ETF](#指數etf)
         * [進場條件:](#進場條件-1)
         * [出場訊號:](#出場訊號-1)
      * [債券ETF](#債券etf)
         * [進場條件:](#進場條件-2)
         * [出場訊號:](#出場訊號-2)
   * [交易系統](#交易系統)
      * [波段投機交易系統](#波段投機交易系統)
         * [進場條件: 活潑股中期回檔反轉向上](#進場條件-活潑股中期回檔反轉向上)
         * [出場訊號:](#出場訊號-3)
      * [循環投資交易系統](#循環投資交易系統)
         * [進場條件: 循環股系統性急跌](#進場條件-循環股系統性急跌)
         * [出場訊號:](#出場訊號-4)
      * [景氣循環交易系統](#景氣循環交易系統)
         * [進場條件: 景氣大循環低點](#進場條件-景氣大循環低點)
         * [出場訊號:](#出場訊號-5)
   * [Reference](#reference)
   * [h1 size](#h1-size)
      * [h2 size](#h2-size)
         * [h3 size](#h3-size)
            * [h4 size](#h4-size)
               * [h5 size](#h5-size)

Created by [gh-md-toc](https://github.com/ekalinin/github-markdown-toc)


# 買進持有  
## 穩定成長   
### 進場條件:  
* 1 建立基本持股: 存股  

Item | Description
------------------------------------ | ---------------------------------------------
1.1 價值比 | > 20
1.2 殖利率 | > (重貼現率+1.5%)

* 2 短線跌多:  

Item | Description
------------------------------------ | ---------------------------------------------
2.1 價值比 | > 60 
2.1 現金殖利率 | > (重貼現率 + 3*1.5%) //目前重貼現率為 1.375 故為 5.875%
2.2 布林通道之 b% 指標 | from > 0 to < 0

* 3 逢低加碼:  

Item | Description
------------------------------------ | ---------------------------------------------
3.1 帳上未實現損益 | <-15%

```
#先進行 2 才能進行 3. 故最每檔股票最多買 3 次
```

### 出場訊號:  

* 1 價格遠高於價值，且短線漲多，沒有存股的價值  

Item | Description
------------------------------------ | ---------------------------------------------
1.1 價值比 | < 20
1.2 殖利率 | <  (重貼現率+1.5%)   // 2.875%
1.3 帳丄未實現損益 |  > 50%
1.4 布林通道之 b% 指標 | from < 1 to > 1

* 2 停利  

Item | Description
------------------------------------ | ---------------------------------------------
2.1 獲利 | 超過 100%

```
# 出場是一次出清。不論是買 1 次, 2 次, 或 3 次
```

## 指數ETF  
### 進場條件:  
* 1 建立基本持股

Item | Description
------------------------------------ | ---------------------------------------------
1.1 隨時 | 

* 2 短線跌多:

Item | Description
------------------------------------ | ---------------------------------------------
2.1 布林通道之 b% 指標 | from > 0 to < 0

```
# 若再次地出現條件 2 可再買 1 次
```

### 出場訊號:  
* 1  漲太多

Item | Description
------------------------------------ | ---------------------------------------------
1.1 帳上未實現損益 | > 50%
1.2 布林通道之 b% 指標 | from < 1 tp > 1
```
# 出場是一次出清。不論是買 1 次, 2 次, 或 3 次
```

## 債券ETF  
### 進場條件:  
* 1 建立基本持股

Item | Description
------------------------------------ | ---------------------------------------------
1.1 隨時 | 

* 2 短線跌多:

Item | Description
------------------------------------ | ---------------------------------------------
2.1 布林通道之 b% 指標 | from > 0 to < 0

```
# 若再次地出現條件 2 可再買 1 次
```

### 出場訊號:  
* 1  漲太多

Item | Description
------------------------------------ | ---------------------------------------------
1.1 帳上未實現損益 | > 25%
1.2 布林通道之 b% 指標 | from < 1 tp > 1
```
# 出場是一次出清。不論是買 1 次, 2 次, 或 3 次
```


# 交易系統  

## 波段投機交易系統  
### 進場條件: 活潑股中期回檔反轉向上   

Item | Description
------------------------------------ | ---------------------------------------------
1 價值比 | > 60 
1 現金殖利率 | > (重貼現率 + 3*1.5%) //目前重貼現率為 1.375 故為 5.875%
2 布林通道 b% | 由 < 0 變成 > 0

### 出場訊號:  
* 1 技術滿足: 高檔反轉向下(移動點停利法)

Item | Description
------------------------------------ | ---------------------------------------------
1.1. 布林通道 b% | 由 > 1 變成 < 1
1.2. 獲利 | 超過 50%

* 2 停利

Item | Description
------------------------------------ | ---------------------------------------------
2.1 獲利 | 100%

* 3 進場點不對

Item | Description
------------------------------------ | ---------------------------------------------
3.1 持股 | 超過三個月
3.1 獲利 | < 3%

* 4 到期  

Item | Description
------------------------------------ | ---------------------------------------------
4.1 持股 | 超過兩年
```
#若買進後再次出現買進訊號則忽略，不再加碼
```

## 循環投資交易系統  
### 進場條件: 循環股系統性急跌  

Item | Description
------------------------------------ | ---------------------------------------------
1 價值比 | > 60 
1 現金殖利率 | > (重貼現率 + 3*1.5%) //目前重貼現率為 1.375 故為 5.875%
2 布林通道 b% | 由 > 0 變成 < 0

### 出場訊號:  
* 1 技術滿足:高檔且短線急漲達滿足點

Item | Description
------------------------------------ | ---------------------------------------------
1.1 布林通道 b% | 由 < 1 變成 > 1
1.2 獲利 | 超過 25%

* 2 停利

Item | Description
------------------------------------ | ---------------------------------------------
2.1 獲利 | 超過 50%

* 3 到期

Item | Description
------------------------------------ | ---------------------------------------------
3.1 持股 | 超過兩年
```
#若買進後再次出現買進訊號則忽略，不再加碼
```


## 景氣循環交易系統
### 進場條件: 景氣大循環低點   

Item | Description
------------------------------------ | ---------------------------------------------
1 PBR | < 1
2 布林通道 b% | 由 < 0 變成 > 0 //這裡的均線用 720日

### 出場訊號:  
* 1 技術滿足:景氣大循環高點

Item | Description
------------------------------------ | ---------------------------------------------
1.1 布林通道 b% | 由 > 1 變成 < 1
1.2 獲利 | 超過 100%

* 2 停利

Item | Description
------------------------------------ | ---------------------------------------------
2.1 獲利 | 超過 200%
```
#若買進後再次出現買進訊號則忽略，不再加碼
```




# Reference
[Asoul/tsrtc Taiwan Stock Real Time Crawler](https://github.com/Asoul/tsrtc)

[Asoul/tsec Taiwan Stock Exchange Crawler](https://github.com/Asoul/tsec)

[初學者的Python金融分析日記EP1 | PyInvest](https://pyecontech.com/2019/06/13/%E5%88%9D%E5%AD%B8%E8%80%85%E7%9A%84python%E9%87%91%E8%9E%8D%E5%88%86%E6%9E%90%E6%97%A5%E8%A8%98ep1/)
```
import requests
import pandas as pd
import io
import re
import time
import datetime
 
def crawler(date_time):
    page_url = 'http://www.twse.com.tw/exchangeReport/MI_INDEX?response=csv&amp;date=' + date_time +'&amp;type=ALLBUT0999'
    page = requests.get(page_url)
    use_text = page.text.splitlines()
    for i,text in enumerate(use_text):
        if text == '"證券代號","證券名稱","成交股數","成交筆數","成交金額","開盤價","最高價","最低價","收盤價","漲跌(+/-)","漲跌價差","最後揭示買價","最後揭示買量","最後揭示賣價","最後揭示賣量","本益比",':
            initial_point = i
            break
    test_df = pd.read_csv(io.StringIO(''.join( + '\n' for text in use_text[initial_point:]])))
    test_df['證券代號'] = test_df['證券代號'].apply(lambda x:x.replace('"',''))
    test_df['證券代號'] = test_df['證券代號'].apply(lambda x: x.replace('=',''))
    return test_df
```

```
#抓好幾天
def trans_date(date_time):
    return ''.join(str(date_time).split(' ')[0].split('-'))
 
def parse_n_days(start_date,n):
     
    df_dict = {}
    now_date = start_date
    for i in range(n):
        time.sleep(5)
        now_date = now_date - datetime.timedelta(days=1)
        try:
            df = crawler(trans_date(now_date))
            print("Current date" + trans_date(now_date))
            df_dict.update({trans_date(now_date):df})
            print('Successful!!')
        except:
            print('Fails at' + str(now_date))
    return df_dict
```

* []()  
![alt tag]()  

# h1 size

## h2 size

### h3 size

#### h4 size

##### h5 size

*strong*strong  
**strong**strong  

> quote  
> quote

- [ ] checklist1
- [x] checklist2

* 1
* 2
* 3

- 1
- 2
- 3

